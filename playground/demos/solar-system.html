<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>太阳系模拟 - Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/common.css">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
            position: relative;
        }

        /* 动态星空背景 */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(ellipse at 30% 20%, rgba(102, 126, 234, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 70% 80%, rgba(240, 147, 251, 0.15) 0%, transparent 50%);
            animation: nebula 20s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes nebula {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        #solarCanvas {
            display: block;
            position: relative;
            z-index: 1;
        }

        .control-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(10, 10, 25, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 24px;
            border: 1px solid rgba(251, 191, 36, 0.3);
            box-shadow:
                0 8px 32px rgba(251, 191, 36, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            color: white;
            z-index: 100;
            max-width: 300px;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.15);
            outline: none;
            -webkit-appearance: none;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            cursor: pointer;
            box-shadow:
                0 0 12px rgba(251, 191, 36, 0.8),
                0 0 0 3px rgba(251, 191, 36, 0.3);
            transition: all 0.3s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.15);
            box-shadow:
                0 0 20px rgba(251, 191, 36, 1),
                0 0 0 5px rgba(251, 191, 36, 0.4);
        }

        .planet-info {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(10, 10, 25, 0.85);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(251, 191, 36, 0.3);
            box-shadow: 0 8px 32px rgba(251, 191, 36, 0.2);
            color: white;
            z-index: 100;
            animation: fadeInUp 0.5s ease-out;
            min-width: 280px;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .planet-info h4 {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 48px;
            height: 48px;
            background: rgba(10, 10, 25, 0.85);
            backdrop-filter: blur(20px);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fbbf24;
            font-size: 20px;
            border: 1px solid rgba(251, 191, 36, 0.3);
            box-shadow: 0 8px 32px rgba(251, 191, 36, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 100;
            text-decoration: none;
        }

        .back-btn:hover {
            transform: scale(1.1) rotate(-5deg);
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.6);
        }
    </style>
</head>

<body>
    <canvas id="solarCanvas"></canvas>

    <a href="../index.html" class="back-btn">
        <i class="fas fa-arrow-left"></i>
    </a>

    <div class="control-panel">
        <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
            <i class="fas fa-solar-system" style="color: #fbbf24;"></i>太阳系控制
        </h3>

        <div class="mb-4">
            <label class="block text-sm mb-2">时间速度: <span id="speedValue">1x</span></label>
            <input type="range" id="timeSpeed" min="0.1" max="5" step="0.1" value="1">
        </div>

        <div class="mb-4">
            <label class="block text-sm mb-2">缩放: <span id="zoomValue">1x</span></label>
            <input type="range" id="zoom" min="0.3" max="2" step="0.1" value="1">
        </div>

        <div class="mb-4">
            <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" id="showOrbits" checked class="w-4 h-4">
                <span class="text-sm">显示轨道</span>
            </label>
        </div>

        <div class="mb-4">
            <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" id="showLabels" checked class="w-4 h-4">
                <span class="text-sm">显示标签</span>
            </label>
        </div>

        <div class="mb-4">
            <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" id="showTrails" class="w-4 h-4">
                <span class="text-sm">显示轨迹</span>
            </label>
        </div>

        <div class="text-xs opacity-70 mt-4 pt-4 border-t border-amber-500/30">
            <div>滚轮: 缩放视角</div>
            <div>拖拽: 平移视角</div>
            <div>点击: 选择行星</div>
        </div>
    </div>

    <div class="planet-info" id="planetInfo">
        <h4 class="text-lg font-bold mb-2" id="planetName">太阳</h4>
        <div class="text-sm opacity-80 space-y-1" id="planetDetails">
            <div>类型: 恒星</div>
            <div>直径: 1,392,700 km</div>
            <div>质量: 1.989 × 10³⁰ kg</div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('solarCanvas');
        const ctx = canvas.getContext('2d');

        let width, height, centerX, centerY;
        let scale = 1;
        let offsetX = 0, offsetY = 0;
        let timeSpeed = 1;
        let showOrbits = true;
        let showLabels = true;
        let showTrails = false;
        let selectedPlanet = null;

        // 行星数据 - 增强版
        const planets = [
            {
                name: '太阳',
                type: '恒星',
                color: '#FDB813',
                glowColor: 'rgba(253, 184, 19, 0.4)',
                secondaryGlow: 'rgba(251, 191, 36, 0.2)',
                radius: 32,
                orbitRadius: 0,
                orbitSpeed: 0,
                details: { diameter: '1,392,700 km', mass: '1.989 × 10³⁰ kg', temp: '5,500°C' }
            },
            {
                name: '水星',
                type: '行星',
                color: '#B5B5B5',
                glowColor: 'rgba(181, 181, 181, 0.3)',
                radius: 5,
                orbitRadius: 55,
                orbitSpeed: 4.74,
                details: { diameter: '4,879 km', mass: '3.285 × 10²³ kg', temp: '167°C' }
            },
            {
                name: '金星',
                type: '行星',
                color: '#E6C87A',
                glowColor: 'rgba(230, 200, 122, 0.3)',
                radius: 7,
                orbitRadius: 80,
                orbitSpeed: 3.50,
                details: { diameter: '12,104 km', mass: '4.867 × 10²⁴ kg', temp: '464°C' }
            },
            {
                name: '地球',
                type: '行星',
                color: '#6B93D6',
                glowColor: 'rgba(107, 147, 214, 0.4)',
                radius: 8,
                orbitRadius: 110,
                orbitSpeed: 2.98,
                details: { diameter: '12,742 km', mass: '5.972 × 10²⁴ kg', temp: '15°C' },
                hasMoon: true
            },
            {
                name: '火星',
                type: '行星',
                color: '#C1440E',
                glowColor: 'rgba(193, 68, 14, 0.4)',
                radius: 6,
                orbitRadius: 145,
                orbitSpeed: 2.41,
                details: { diameter: '6,779 km', mass: '6.39 × 10²³ kg', temp: '-65°C' }
            },
            {
                name: '木星',
                type: '气态巨行星',
                color: '#D8CA9D',
                glowColor: 'rgba(216, 202, 157, 0.3)',
                radius: 20,
                orbitRadius: 205,
                orbitSpeed: 1.31,
                details: { diameter: '139,820 km', mass: '1.898 × 10²⁷ kg', temp: '-110°C' }
            },
            {
                name: '土星',
                type: '气态巨行星',
                color: '#F4D59E',
                glowColor: 'rgba(244, 213, 158, 0.3)',
                radius: 18,
                orbitRadius: 265,
                orbitSpeed: 0.97,
                details: { diameter: '116,460 km', mass: '5.683 × 10²⁶ kg', temp: '-140°C' },
                hasRings: true
            },
            {
                name: '天王星',
                type: '冰巨星',
                color: '#D1E7E7',
                glowColor: 'rgba(209, 231, 231, 0.4)',
                radius: 12,
                orbitRadius: 325,
                orbitSpeed: 0.68,
                details: { diameter: '50,724 km', mass: '8.681 × 10²⁵ kg', temp: '-195°C' }
            },
            {
                name: '海王星',
                type: '冰巨星',
                color: '#5B5DDF',
                glowColor: 'rgba(91, 93, 223, 0.4)',
                radius: 12,
                orbitRadius: 375,
                orbitSpeed: 0.54,
                details: { diameter: '49,244 km', mass: '1.024 × 10²⁶ kg', temp: '-200°C' }
            }
        ];

        let time = 0;
        let trails = [];
        let stars = [];

        function init() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            centerX = width / 2;
            centerY = height / 2;

            planets.forEach(p => {
                p.angle = Math.random() * Math.PI * 2;
                p.x = centerX;
                p.y = centerY;
                p.trail = [];
            });

            // 生成星空
            stars = [];
            for (let i = 0; i < 300; i++) {
                stars.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    size: Math.random() * 1.5 + 0.3,
                    opacity: Math.random() * 0.8 + 0.2,
                    twinkle: Math.random() * Math.PI * 2
                });
            }
        }

        function drawStars() {
            stars.forEach(star => {
                star.twinkle += 0.02;
                const opacity = star.opacity * (0.6 + Math.sin(star.twinkle) * 0.4);

                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);

                // 星星发光效果
                const gradient = ctx.createRadialGradient(
                    star.x, star.y, 0,
                    star.x, star.y, star.size * 3
                );
                gradient.addColorStop(0, `rgba(255, 255, 255, ${opacity})`);
                gradient.addColorStop(0.5, `rgba(200, 220, 255, ${opacity * 0.5})`);
                gradient.addColorStop(1, 'transparent');

                ctx.fillStyle = gradient;
                ctx.fill();
            });
        }

        function drawOrbit(radius) {
            if (!showOrbits || radius === 0) return;

            ctx.beginPath();
            ctx.arc(centerX + offsetX, centerY + offsetY, radius * scale, 0, Math.PI * 2);
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.12)';
            ctx.lineWidth = 1.5;
            ctx.setLineDash([5, 5]);
            ctx.stroke();
            ctx.setLineDash([]);
        }

        function drawPlanet(planet) {
            // 计算位置
            const x = centerX + offsetX + Math.cos(planet.angle) * planet.orbitRadius * scale;
            const y = centerY + offsetY + Math.sin(planet.angle) * planet.orbitRadius * scale;

            planet.x = x;
            planet.y = y;

            // 绘制轨迹 - 渐变效果
            if (showTrails && planet.orbitRadius > 0) {
                planet.trail.push({ x, y });
                if (planet.trail.length > 150) planet.trail.shift();

                if (planet.trail.length > 1) {
                    for (let i = 0; i < planet.trail.length - 1; i++) {
                        const alpha = (i / planet.trail.length) * 0.6;
                        ctx.beginPath();
                        ctx.moveTo(planet.trail[i].x, planet.trail[i].y);
                        ctx.lineTo(planet.trail[i + 1].x, planet.trail[i + 1].y);
                        ctx.strokeStyle = planet.color + Math.floor(alpha * 255).toString(16).padStart(2, '0');
                        ctx.lineWidth = 2;
                        ctx.stroke();
                    }
                }
            }

            // 太阳多层发光效果
            if (planet.name === '太阳') {
                // 外层光晕
                const outerGlow = ctx.createRadialGradient(x, y, 0, x, y, planet.radius * scale * 4);
                outerGlow.addColorStop(0, planet.secondaryGlow);
                outerGlow.addColorStop(1, 'transparent');
                ctx.beginPath();
                ctx.arc(x, y, planet.radius * scale * 4, 0, Math.PI * 2);
                ctx.fillStyle = outerGlow;
                ctx.fill();

                // 内层光晕
                const innerGlow = ctx.createRadialGradient(x, y, 0, x, y, planet.radius * scale * 2.5);
                innerGlow.addColorStop(0, planet.glowColor);
                innerGlow.addColorStop(1, 'transparent');
                ctx.beginPath();
                ctx.arc(x, y, planet.radius * scale * 2.5, 0, Math.PI * 2);
                ctx.fillStyle = innerGlow;
                ctx.fill();
            }

            // 行星发光效果
            const planetGlow = ctx.createRadialGradient(
                x, y, 0,
                x, y, planet.radius * scale * 2
            );
            planetGlow.addColorStop(0, planet.glowColor);
            planetGlow.addColorStop(1, 'transparent');
            ctx.beginPath();
            ctx.arc(x, y, planet.radius * scale * 2, 0, Math.PI * 2);
            ctx.fillStyle = planetGlow;
            ctx.fill();

            // 土星环 - 增强版
            if (planet.hasRings) {
                ctx.save();
                ctx.translate(x, y);
                ctx.scale(1, 0.4);

                // 多层环
                for (let i = 0; i < 3; i++) {
                    ctx.beginPath();
                    ctx.ellipse(0, 0, planet.radius * scale * (2.2 + i * 0.3), planet.radius * scale * (2.2 + i * 0.3), 0, 0, Math.PI * 2);
                    ctx.strokeStyle = `rgba(244, 213, 158, ${0.6 - i * 0.15})`;
                    ctx.lineWidth = (3 - i) * scale;
                    ctx.stroke();
                }
                ctx.restore();
            }

            // 行星本体 - 增强渐变
            const bodyGradient = ctx.createRadialGradient(
                x - planet.radius * scale * 0.4,
                y - planet.radius * scale * 0.4,
                0,
                x,
                y,
                planet.radius * scale
            );

            const lighterColor = lightenColor(planet.color, 40);
            bodyGradient.addColorStop(0, lighterColor);
            bodyGradient.addColorStop(0.5, planet.color);
            bodyGradient.addColorStop(1, darkenColor(planet.color, 20));

            ctx.beginPath();
            ctx.arc(x, y, planet.radius * scale, 0, Math.PI * 2);
            ctx.fillStyle = bodyGradient;
            ctx.fill();

            // 选中效果 - 炫彩光环
            if (selectedPlanet === planet) {
                ctx.beginPath();
                ctx.arc(x, y, planet.radius * scale + 8, 0, Math.PI * 2);
                ctx.strokeStyle = 'rgba(251, 191, 36, 0.8)';
                ctx.lineWidth = 3;
                ctx.setLineDash([5, 5]);
                ctx.stroke();
                ctx.setLineDash([]);

                // 外发光环
                const selectGlow = ctx.createRadialGradient(
                    x, y, planet.radius * scale,
                    x, y, planet.radius * scale + 15
                );
                selectGlow.addColorStop(0, 'rgba(251, 191, 36, 0.6)');
                selectGlow.addColorStop(1, 'transparent');
                ctx.beginPath();
                ctx.arc(x, y, planet.radius * scale + 15, 0, Math.PI * 2);
                ctx.fillStyle = selectGlow;
                ctx.fill();
            }

            // 标签 - 发光文字
            if (showLabels) {
                ctx.font = 'bold 13px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';

                // 文字发光
                ctx.shadowColor = 'rgba(255, 255, 255, 0.8)';
                ctx.shadowBlur = 8;
                ctx.fillStyle = 'white';
                ctx.fillText(planet.name, x, y + planet.radius * scale + 20);
                ctx.shadowBlur = 0;
            }
        }

        function lightenColor(color, percent) {
            const num = parseInt(color.replace('#', ''), 16);
            const amt = Math.round(2.55 * percent);
            const R = Math.min(255, (num >> 16) + amt);
            const G = Math.min(255, (num >> 8 & 0x00FF) + amt);
            const B = Math.min(255, (num & 0x0000FF) + amt);
            return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
        }

        function darkenColor(color, percent) {
            const num = parseInt(color.replace('#', ''), 16);
            const amt = Math.round(2.55 * percent);
            const R = Math.max(0, (num >> 16) - amt);
            const G = Math.max(0, (num >> 8 & 0x00FF) - amt);
            const B = Math.max(0, (num & 0x0000FF) - amt);
            return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
        }

        function update() {
            time += 0.01 * timeSpeed;

            planets.forEach(planet => {
                if (planet.orbitRadius > 0) {
                    planet.angle += planet.orbitSpeed * 0.002 * timeSpeed;
                }
            });
        }

        function animate() {
            // 深空背景渐变
            const bgGradient = ctx.createRadialGradient(
                centerX, centerY, 0,
                centerX, centerY, Math.max(width, height)
            );
            bgGradient.addColorStop(0, '#0a0a15');
            bgGradient.addColorStop(0.5, '#050510');
            bgGradient.addColorStop(1, '#000005');
            ctx.fillStyle = bgGradient;
            ctx.fillRect(0, 0, width, height);

            // 绘制星空
            drawStars();

            // 绘制轨道
            planets.forEach(planet => drawOrbit(planet.orbitRadius));

            // 更新位置
            update();

            // 绘制行星
            planets.forEach(planet => drawPlanet(planet));

            requestAnimationFrame(animate);
        }

        // 事件监听
        canvas.addEventListener('wheel', (e) => {
            e.preventDefault();
            const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;
            scale *= zoomFactor;
            scale = Math.max(0.3, Math.min(2, scale));
            document.getElementById('zoomValue').textContent = scale.toFixed(1) + 'x';
        });

        let isDragging = false;
        let lastMouseX, lastMouseY;

        canvas.addEventListener('mousedown', (e) => {
            isDragging = true;
            lastMouseX = e.clientX;
            lastMouseY = e.clientY;
        });

        canvas.addEventListener('mousemove', (e) => {
            if (isDragging) {
                offsetX += e.clientX - lastMouseX;
                offsetY += e.clientY - lastMouseY;
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
            }
        });

        canvas.addEventListener('mouseup', () => {
            isDragging = false;
        });

        canvas.addEventListener('click', (e) => {
            const clickX = e.clientX - offsetX - centerX;
            const clickY = e.clientY - offsetY - centerY;

            planets.forEach(planet => {
                const dx = clickX - Math.cos(planet.angle) * planet.orbitRadius * scale;
                const dy = clickY - Math.sin(planet.angle) * planet.orbitRadius * scale;
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance < planet.radius * scale + 15) {
                    selectedPlanet = planet;
                    updatePlanetInfo(planet);
                }
            });
        });

        function updatePlanetInfo(planet) {
            document.getElementById('planetName').textContent = planet.name;
            const details = planet.details;
            document.getElementById('planetDetails').innerHTML = `
                <div>类型: ${planet.type}</div>
                <div>直径: ${details.diameter}</div>
                <div>质量: ${details.mass}</div>
                ${details.temp ? `<div>温度: ${details.temp}</div>` : ''}
            `;
        }

        // 控制面板
        document.getElementById('timeSpeed').addEventListener('input', (e) => {
            timeSpeed = parseFloat(e.target.value);
            document.getElementById('speedValue').textContent = timeSpeed.toFixed(1) + 'x';
        });

        document.getElementById('zoom').addEventListener('input', (e) => {
            scale = parseFloat(e.target.value);
            document.getElementById('zoomValue').textContent = scale.toFixed(1) + 'x';
        });

        document.getElementById('showOrbits').addEventListener('change', (e) => {
            showOrbits = e.target.checked;
        });

        document.getElementById('showLabels').addEventListener('change', (e) => {
            showLabels = e.target.checked;
        });

        document.getElementById('showTrails').addEventListener('change', (e) => {
            showTrails = e.target.checked;
            if (!showTrails) {
                planets.forEach(p => p.trail = []);
            }
        });

        window.addEventListener('resize', () => {
            init();
        });

        // 初始化
        init();
        animate();
    </script>
</body>
</html>
